<!DOCTYPE html>
<html lang="hi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>रक्षाबंधन की हार्दिक शुभकामनाएं ✨</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Yatra+One&family=Tiro+Devanagari+Hindi:ital,wght@0,400;0,700;1,400&display=swap" rel="stylesheet">
    
    <style>
        :root {
            --gold-light: #FFD700;
            --gold-dark: #B38600;
            --royal-dark: #14002B;
            --light-cream: #FFF8E1;
            --text-color: #333;
            --whatsapp-color: #25D366;
            /* --copy-color: #6c757d; -- Removed as it's no longer needed */
        }
        *, *::before, *::after { box-sizing: border-box; }
        
        body {
            margin: 0;
            font-family: 'Tiro Devanagari Hindi', serif;
            background: linear-gradient(160deg, #2c0b4d, #14002B, #4a0f4a, #14002B);
            background-size: 400% 400%;
            animation: gradientAnimation 20s ease infinite;
            color: var(--text-color);
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            padding: 20px 0;
            overflow-x: hidden;
        }
        @keyframes gradientAnimation {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        #petal-canvas, #fireworks-canvas {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none;
        }
        #petal-canvas { z-index: 1; }
        #fireworks-canvas { z-index: 20; }

        .main-container {
            max-width: 480px; width: 95%; position: relative; z-index: 10;
        }
        
        #music-controls {
            position: fixed; top: 20px; right: 20px; z-index: 30;
            background: rgba(255,255,255,0.8); border-radius: 50%; width: 45px; height: 45px;
            display: flex; justify-content: center; align-items: center; cursor: pointer;
            box-shadow: 0 2px 10px rgba(0,0,0,0.2);
        }

        .royal-card {
            background-color: rgba(255, 248, 225, 0.95);
            backdrop-filter: blur(8px);
            border: 4px solid var(--gold-light);
            border-radius: 20px;
            box-shadow: 0 0 30px rgba(255, 215, 0, 0.4);
            padding: 30px; text-align: center;
            transform: scale(0.95); opacity: 0;
            animation: fadeInCard 1s ease-out forwards;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
        .royal-card:hover {
            transform: scale(1.02);
            box-shadow: 0 0 40px rgba(255, 215, 0, 0.6);
        }
        @keyframes fadeInCard { to { transform: scale(1); opacity: 1; } }
        
        /* --- Styles for Animated Border --- */
        @keyframes rotateBorder {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        .rakhi-image-wrapper {
            position: relative;
            padding: 3px; /* यह बॉर्डर की मोटाई है */
            border-radius: 18px; /* इमेज रेडियस से थोड़ा ज्यादा */
            display: inline-block;
            z-index: 1;
            overflow: hidden;
        }
        .rakhi-image-wrapper::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 200%;
            height: 200%;
            background: conic-gradient(
                from 0deg, 
                var(--gold-light), 
                #ff6b6b, 
                #c2185b, 
                #ffffff,
                #fdd835,
                var(--gold-light)
            );
            transform-origin: center center;
            transform: translate(-50%, -50%);
            animation: rotateBorder 4s linear infinite;
            z-index: -1;
        }
        .rakhi-gif { 
            max-width: 100%; 
            border-radius: 15px; 
            display: block; /* रैपर के अंदर सही से फिट होने के लिए */
        }
        /* --- End of Animated Border Styles --- */

        .greeting-header {
            font-family: 'Tiro Devanagari Hindi', cursive; font-size: 1.4rem;
            color: var(--royal-dark); line-height: 1.5; margin: 20px 0; min-height: 100px;
        }
        .greeting-header .receiver-name { color: #c2185b; font-weight: bold; }
        .greeting-header .sender-info {
            font-size: 1.4rem; color: var(--gold-dark); display: block;
            margin-top: 10px; font-weight: 700;
        }
        
        .rakhi-quote {
            font-size: 1.1rem; font-style: italic; color: var(--gold-dark);
            margin: 25px 10px; line-height: 1.6; min-height: 80px;
            border-top: 1px solid rgba(179, 134, 0, 0.3);
            border-bottom: 1px solid rgba(179, 134, 0, 0.3);
            padding: 15px 0;
        }

        .typewriter-cursor::after {
            content: ' |'; color: var(--royal-dark); animation: blink 1s step-end infinite;
        }
        @keyframes blink { 50% { opacity: 0; } }
        
        .form-section h2 { font-size: 1.5rem; color: var(--royal-dark); margin-bottom: 20px; }
        .input-field {
            width: 100%; padding: 12px; font-size: 1.1rem; border: 2px solid #ccc;
            border-radius: 10px; text-align: center; background-color: #fff;
            transition: border-color 0.3s, box-shadow 0.3s;
        }
        .input-field:focus {
            border-color: var(--gold-dark); outline: none;
            box-shadow: 0 0 8px rgba(179, 134, 0, 0.4);
        }
        
        .button-group { display: flex; gap: 10px; margin-top: 20px; justify-content: center; }
        .action-btn {
            color: white; border: none; padding: 12px 20px; font-size: 1.1rem; font-weight: 600;
            border-radius: 50px; cursor: pointer; display: inline-flex;
            align-items: center; justify-content: center; gap: 10px;
            transition: transform 0.2s, box-shadow 0.3s;
            box-shadow: 0 4px 10px rgba(0,0,0,0.15);
            flex-grow: 1; max-width: 200px;
        }
        .action-btn:hover { transform: translateY(-3px) scale(1.05); }
        .whatsapp-btn { background: var(--whatsapp-color); }
        /* MODIFIED: New style for the Instagram button */
        .instagram-btn { 
            background: linear-gradient(45deg, #f09433 0%, #e6683c 25%, #dc2743 50%, #cc2366 75%, #bc1888 100%);
        }
        .action-btn svg { width: 24px; height: 24px; }
    </style>
</head>
<body>

    <canvas id="petal-canvas"></canvas>
    
    <div class="main-container" id="main-container">
        <div class="royal-card" id="royal-card">
            
            <div class="rakhi-image-wrapper">
                <img src="RakshaBandhan.gif" alt="Raksha Bandhan" class="rakhi-gif" loading="lazy">
            </div>

            <div id="greeting-display">
                <h1 class="greeting-header" id="greeting-header"></h1>
            </div>
            <p class="rakhi-quote" id="rakhi-quote"></p>
            
            <div class="form-section">
                <h2>अपने नाम से शुभकामनाएं भेजें</h2>
                <input type="text" id="senderNameInput" class="input-field" placeholder="यहाँ अपना नाम लिखें">
                <input type="text" id="receiverNameInput" class="input-field" placeholder="पाने वाले का नाम (वैकल्पिक)" style="margin-top: 10px;">
                
                <div class="button-group">
                    <button class="action-btn whatsapp-btn" onclick="shareOnWhatsApp()">
                        <svg role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" fill="white"><title>WhatsApp</title><path d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.297-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413Z"/></svg>
                        WhatsApp
                    </button>
                    <!-- MODIFIED: Copy link button replaced with Instagram button -->
                    <button class="action-btn instagram-btn" onclick="shareOnInstagram()">
                        <svg role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" fill="white"><title>Instagram</title><path d="M12 0C8.74 0 8.333.015 7.053.072 5.775.132 4.905.333 4.14.63c-.784.297-1.457.717-2.126 1.387C1.356 2.68.936 3.353.63 4.14c-.3.765-.5 1.635-.558 2.913-.058 1.28-.072 1.687-.072 4.947s.015 3.667.072 4.947c.06 1.277.26 2.148.558 2.913.3.784.717 1.457 1.387 2.126.67.67 1.343 1.09 2.126 1.387.765.3 1.635.5 2.913.558 1.28.058 1.687.072 4.947.072 3.26 0 3.667-.015 4.947-.072 1.277-.06 2.148-.26 2.913-.558.784-.3 1.457-.717 2.126-1.387.67-.67 1.09-1.343 1.387-2.126.3-.765.5-1.635.558-2.913.058-1.28.072-1.687.072-4.947s-.015-3.667-.072-4.947c-.06-1.277-.26-2.148-.558-2.913-.3-.784-.717-1.457-1.387-2.126C21.319 1.356 20.647.936 19.86.63c-.765-.3-1.635-.5-2.913-.558C15.667.015 15.26 0 12 0zm0 2.16c3.203 0 3.585.012 4.85.07 1.17.055 1.805.248 2.227.415.562.217.96.477 1.382.896.419.42.679.82.896 1.382.167.422.36 1.057.413 2.227.058 1.265.07 1.646.07 4.85s-.012 3.585-.07 4.85c-.055 1.17-.248 1.805-.413 2.227-.217.562-.477.96-.896 1.382-.42.419-.82.679-1.382.896-.422.167-1.057.36-2.227.413-1.265.058-1.646.07-4.85.07s-3.585-.012-4.85-.07c-1.17-.055-1.805-.248-2.227-.413-.562-.217-.96-.477-1.382-.896-.419-.42-.679-.82-.896-1.382-.167-.422-.36-1.057-.413-2.227-.058-1.265-.07-1.646-.07-4.85s.012-3.585.07-4.85c.055-1.17.248-1.805.413-2.227.217-.562.477.96.896-1.382.42-.419.82-.679 1.382-.896.422-.167 1.057.36 2.227.413C8.415 2.172 8.797 2.16 12 2.16zm0 1.44c-1.609 0-1.823.006-2.454.035-1.49.068-2.01.248-2.23.33-.425.16-.65.34-.825.515-.175.175-.355.4-.515.825-.083.22-.262.74-.33 2.23-.029.63-.035 1.045-.035 3.65s.006 3.02.035 3.65c.068 1.49.248 2.01.33 2.23.16.425.34.65.515.825.175.175.4.355.825.515.22.083.74.262 2.23.33.63.029 1.045.035 3.65.035s3.02-.006 3.65-.035c1.49-.068 2.01-.248 2.23-.33.425-.16.65-.34.825.515.175-.175.355-.4.515-.825.083-.22.262.74.33-2.23.029-.63.035-1.045.035-3.65s-.006-3.02-.035-3.65c-.068-1.49-.248-2.01-.33-2.23-.16-.425-.34-.65-.515-.825-.175-.175-.4-.355-.825-.515-.22-.083-.74-.262-2.23-.33-.63-.029-1.045-.035-3.65-.035zm0 3.84c-1.995 0-3.6 1.605-3.6 3.6s1.605 3.6 3.6 3.6 3.6-1.605 3.6-3.6-1.605-3.6-3.6-3.6zm0 5.64c-1.125 0-2.04-1.015-2.04-2.04s.915-2.04 2.04-2.04 2.04.915 2.04 2.04-.915 2.04-2.04 2.04zm4.86-5.88c-.525 0-.96.435-.96.96s.435.96.96.96.96-.435.96-.96-.435-.96-.96-.96z"/></svg>
                        Instagram
                    </button>
                </div>
            </div>
        </div>
    </div>
    
    <canvas id="fireworks-canvas"></canvas>
    <audio id="bg-music" loop src="rakhi-music.mp3"></audio>
    <audio id="chime-sound" src="data:audio/mpeg;base64,UklGRigAAABXQVZFZm10IBAAAAABAAEARKwAAIhYAQACABAAZGF0YQQAAAAA//8CAP3/AwEEAAMA/v8EAP7/AgADAP7/AgD//wMA/f8EAP//AgD//wMA////AP7/AgD9/wQA//8CAP7/AgD9/wEA//8CAP7/BAD//wMA//8CAP7/BAD//wMA//8CAP7/BAD//wMA//8CAP7/BAD//wMA//8CAP7/BAD//wMA//8CAP7/BAD//wMA//8CAP7/BAD//wMA//8CAP7/BAD//w=="></audio>
    <div id="music-controls" onclick="toggleMusic()">
        <svg id="play-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M8 5v14l11-7z"></path></svg>
        <svg id="pause-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" style="display:none"><path d="M6 19h4V5H6v14zm8-14v14h4V5h-4z"></path></svg>
    </div>

    <script>
    // --- ELEMENTS ---
    const music = document.getElementById('bg-music');
    const chime = document.getElementById('chime-sound');
    const greetingHeader = document.getElementById('greeting-header');
    const quoteElement = document.getElementById('rakhi-quote');

    // Random Quotes
    const quotes = [
        "चंदन का टीका, रेशम का धागा, सावन की सुगंध, बारिश की फुहार, भाई की उम्मीद, बहना का प्यार, मुबारक हो आपको रक्षा बंधन का त्योहार।",
        "आया है एक जश्न का त्यौहार, जिसमे होता है भाई-बहन का प्यार, चलो मनाएं राखी का ये त्यौहार!",
        "बहन का प्यार किसी दुआ से कम नहीं होता, वो चाहे दूर भी हो तो गम नहीं होता। अक्सर रिश्ते दूरियों से फीके पड़ जाते हैं, पर भाई-बहन का प्यार कभी कम नहीं होता।",
        "यह धागा सिर्फ एक राखी नहीं, बल्कि मेरे प्यार, सुरक्षा और शुभकामनाओं का प्रतीक है। रक्षाबंधन की बधाई!",
        "खुशकिस्मत होती है वो बहन, जिसके सिर पर भाई का हाथ होता है, हर परेशानी में उसके साथ होता है, लड़ना-झगड़ना फिर प्यार से मनाना, तभी तो इस रिश्ते में इतना प्यार होता है।"
    ];
    
    // --- INITIALIZATION ---
    window.onload = () => {
        // Start effects immediately
        startPetalFall();
        toggleMusic(true); // Attempt to autoplay music

        // Pick and display a random quote
        quoteElement.textContent = quotes[Math.floor(Math.random() * quotes.length)];
        
        const urlParams = new URLSearchParams(window.location.search);
        const senderName = urlParams.get('from');
        const receiverName = urlParams.get('to');

        if (senderName) {
            displaySharedWish(senderName, receiverName);
        } else {
            displayDefaultWish();
        }
    };

    function displayDefaultWish() {
        const defaultMessage = "आपको और आपके पूरे परिवार को हमारी तरफ से रक्षाबंधन की हार्दिक शुभकामनाएं।";
        typewriterEffect(greetingHeader, defaultMessage);
    }

    function displaySharedWish(fromName, toName) {
        fromName = decodeURIComponent(fromName.replace(/\+/g, ' '));
        let message;
        if (toName) {
            toName = decodeURIComponent(toName.replace(/\+/g, ' '));
            document.title = `${fromName} की तरफ से ${toName} को शुभकामनाएं`;
            message = `<span class="receiver-name">प्रिय ${toName},</span><br>आपको रक्षाबंधन की हार्दिक शुभकामनाएं। <span class="sender-info">${fromName} की तरफ से</span>`;
        } else {
            message = `आपको और आपके पूरे परिवार को रक्षाबंधन की हार्दिक शुभकामनाएं। <span class="sender-info">${fromName} की तरफ से</span>`;
        }
        
        typewriterEffect(greetingHeader, message, () => {
            startFireworks();
            chime.play().catch(e => {});
        });
    }
    
    function generateLink() {
        const senderName = document.getElementById('senderNameInput').value.trim();
        const receiverName = document.getElementById('receiverNameInput').value.trim();

        if (!senderName) {
            alert("कृपया अपना नाम लिखें!");
            return null;
        }

        const baseUrl = window.location.href.split('?')[0];
        let url = `${baseUrl}?from=${encodeURIComponent(senderName)}`;
        if (receiverName) {
            url += `&to=${encodeURIComponent(receiverName)}`;
        }
        return url;
    }

    function shareOnWhatsApp() {
        const pageUrl = generateLink();
        if (!pageUrl) return;

        const senderName = document.getElementById('senderNameInput').value.trim();
        const shareText = `✨ *${senderName}* की तरफ से आपको रक्षाबंधन की दिव्य शुभकामनाएं! ✨\n\nयह खूबसूरत संदेश देखने के लिए नीचे दिए लिंक पर क्लिक करें:\n👇👇👇\n${pageUrl}`;
        const whatsappUrl = `https://wa.me/?text=${encodeURIComponent(shareText)}`;
        window.open(whatsappUrl, '_blank');
    }

    // MODIFIED: copyLink function removed and replaced with shareOnInstagram
    function shareOnInstagram() {
        const pageUrl = generateLink();
        if (!pageUrl) return;

        navigator.clipboard.writeText(pageUrl).then(() => {
            alert("लिंक कॉपी हो गया है! अब आप इसे अपनी Instagram स्टोरी या बायो में पेस्ट करके शेयर कर सकते हैं।");
        }, (err) => {
            alert("लिंक कॉपी करने में विफल रहा।");
        });
    }
    
    function typewriterEffect(element, text, callback) {
        let i = 0;
        element.innerHTML = "";
        element.classList.add("typewriter-cursor");
        const typingInterval = setInterval(() => {
            if (i < text.length) {
                if (text.charAt(i) === '<') {
                    const closingTagIndex = text.indexOf('>', i);
                    if (closingTagIndex !== -1) {
                        element.innerHTML += text.substring(i, closingTagIndex + 1);
                        i = closingTagIndex;
                    }
                } else {
                    element.innerHTML += text.charAt(i);
                }
                i++;
            } else {
                clearInterval(typingInterval);
                element.classList.remove("typewriter-cursor");
                if (callback) callback();
            }
        }, 70);
    }
    
    function toggleMusic(forcePlay = false) {
        const playIcon = document.getElementById('play-icon');
        const pauseIcon = document.getElementById('pause-icon');
        
        if (forcePlay) {
            const promise = music.play();
            if (promise !== undefined) {
                promise.catch(error => {
                    console.log("Autoplay was prevented by the browser.");
                });
            }
        } else {
            music.paused ? music.play() : music.pause();
        }

        music.onplaying = () => { playIcon.style.display = 'none'; pauseIcon.style.display = 'block'; };
        music.onpause = () => { playIcon.style.display = 'block'; pauseIcon.style.display = 'none'; };
    }

    function startPetalFall() {
        const canvas = document.getElementById('petal-canvas'); if (!canvas) return; const ctx = canvas.getContext('2d');
        canvas.width = window.innerWidth; canvas.height = window.innerHeight;
        let petals = []; const petalColors = ['#FFD700', '#D35400', '#ff6b6b'];
        function Petal() { this.x = Math.random() * canvas.width; this.y = Math.random() * canvas.height * 2 - canvas.height; this.w = 15 + Math.random() * 10; this.h = 10 + Math.random() * 5; this.opacity = this.w / 25; this.flip = Math.random(); this.xSpeed = 0.5 + Math.random(); this.ySpeed = 1 + Math.random(); this.flipSpeed = Math.random() * 0.03; this.color = petalColors[Math.floor(Math.random() * petalColors.length)]; }
        Petal.prototype.draw = function() { if (this.y > canvas.height || this.x > canvas.width) { this.x = Math.random() * canvas.width; this.y = -40; } this.y += this.ySpeed; this.x += this.xSpeed; this.flip += this.flipSpeed; ctx.globalAlpha = this.opacity; ctx.fillStyle = this.color; ctx.beginPath(); ctx.moveTo(this.x, this.y); ctx.bezierCurveTo(this.x - this.w / 2, this.y - this.h / 2, this.x + this.w / 2, this.y - this.h / 2, this.x, this.y); ctx.fill(); }
        function createPetals() { for (let i = 0; i < 30; i++) { petals.push(new Petal()); } }
        function animatePetals() { ctx.clearRect(0, 0, canvas.width, canvas.height); petals.forEach(p => p.draw()); requestAnimationFrame(animatePetals); }
        createPetals(); animatePetals();
        window.addEventListener('resize', () => { canvas.width = window.innerWidth; canvas.height = window.innerHeight; petals = []; createPetals(); });
    }

    function startFireworks() {
        const canvas = document.getElementById('fireworks-canvas'); if (!canvas) return; const ctx = canvas.getContext('2d');
        canvas.width = window.innerWidth; canvas.height = window.innerHeight;
        let particles = []; const colors = ["#FFD700", "#c2185b", "#ff1744", "#fdd835", "#ffffff", "#ff6b6b"];
        function Particle(x, y, color) { this.x = x; this.y = y; this.color = color; this.size = Math.random() * 2.5 + 2; this.angle = Math.random() * Math.PI * 2; this.speed = Math.random() * 8 + 4; this.vx = Math.cos(this.angle) * this.speed; this.vy = Math.sin(this.angle) * this.speed; this.gravity = 0.12; this.alpha = 1; this.decay = Math.random() * 0.02 + 0.015; }
        Particle.prototype.update = function() { this.vy += this.gravity; this.x += this.vx; this.y += this.vy; this.alpha -= this.decay; };
        Particle.prototype.draw = function() { ctx.globalAlpha = this.alpha; ctx.fillStyle = this.color; ctx.beginPath(); ctx.arc(this.x, this.y, this.size, 0, Math.PI * 2); ctx.fill(); };
        function createFirework(x, y) { const particleCount = 200; for (let i = 0; i < particleCount; i++) { particles.push(new Particle(x, y, colors[Math.floor(Math.random() * colors.length)])); } }
        function animate() { ctx.fillStyle = 'rgba(20, 0, 43, 0.15)'; ctx.fillRect(0, 0, canvas.width, canvas.height); for (let i = particles.length - 1; i >= 0; i--) { particles[i].draw(); particles[i].update(); if (particles[i].alpha <= 0) particles.splice(i, 1); } requestAnimationFrame(animate); }
        const launchInterval = setInterval(() => { if (document.visibilityState === 'visible') { createFirework(Math.random() * canvas.width, Math.random() * canvas.height * 0.6); } }, 2000);
        setTimeout(() => clearInterval(launchInterval), 12000);
        animate();
    }
    </script>
</body>
</html>